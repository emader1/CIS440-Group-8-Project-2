<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MentorMe - Dashboard</title>
    <link rel="stylesheet" href="dashboard.css">
    <!-- JS for the calendar. -->
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js'></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth'
        });
        calendar.render();
        fetchEventsFromDatabase();

    // Adds events to calendar.
    function fetchEventsFromDatabase() {
        fetch('http://127.0.0.1:5000/fetch_data', {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json'
            }
        })
        .then(function(response) {
            if (!response.ok) {
                throw new Error('Network response error.');
            }
            return response.json();
        })
        .then(function(data) {
            Object.keys(data).forEach(function(eventName) {
                var eventDate = new Date(data[eventName]).toISOString();
                console.log('Adding event:', eventName, 'Date:', eventDate);
                var event = {
                    title: eventName,
                    start: eventDate
                };
                calendar.addEvent(event);
            });
        })
        .catch(function(error) {
            console.error('Error fetching events:', error);
        });
    }
    });
    </script>
    <!-- JS for the orgchart. -->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', {packages:["orgchart"]});
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            var data = new google.visualization.DataTable();
            data.addColumn('string', 'Name');
            data.addColumn('string', 'Manager');
            data.addColumn('string', 'ToolTip');

            data.addRows([
                [{'v':'Jim', 'f':'Jim<div style="color:red; font-style:italic">Vice President</div>'},
                'Mike', 'VP'],
                ['Alice', 'Mike', ''],
                ['Bob', 'Jim', 'Bob Sponge'],
                ['Carol', 'Bob', '']
            ]);

            var chart = new google.visualization.OrgChart(document.getElementById('chart_div'));
            chart.draw(data, {'allowHtml':true});
        }
    </script>
</head>
<body>
    <div class="row">
        <div class="header_container">
            <div class="col-lg-11 col-md-11 col-sm-12 white">
                <h1>MentorMe - Home</h1>
                <h2>Welcome <span id="userName"></span></h2>
            </div>
            <div class="col-lg-01 col-md-01 col-sm-00 white">
                <div class="menu_container">
                    <h2>&#9776;</h2>
                    <div class="dropdown_menu">
                        <span>Link 1</span>
                        <span>Link 1</span>
                        <span>Link 1</span>
                      </div>
                </div>
            </div>
        </div>
    </div>
     <!-- Menu for mobile view. -->
    <div class="row">
        <div class="col-lg-00 col-md-00 col-sm-12 white">
            <h3>mobile menu</h3>
        </div>
    </div>
    <!-- Calendar -->
    <div class="row">
        <div class="calendar_container">
            <div class="col-lg-02 col-md-02 col-sm-00 white"></div>
                <div class="col-lg-08 col-md-08 col-sm-12 white">
                    <div id='calendar'></div>
                </div>
            <div class="col-lg-02 col-md-02 col-sm-00 white"></div>
        </div>
    </div>
    <!-- Features -->
    <div class="row">
        <div class="chart_container col-lg-06 col-md-06 col-sm-12 white">
            <div id="chart_div"></div>
        </div>
        <div class="chart_container col-lg-06 col-md-06 col-sm-12 white">
            <h2>Available Matches</h2>
            <ul id="unmatchedUsersList"></ul>
        </div>
    </div>
    <!-- Footer -->
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 white">
            <p>Â© 2024 MentorMe, Inc. All rights reserved. Join our platform today to embark on a journey of learning, sharing, and professional growth.</p>
        </div>
    </div>
    <script src="main.js"></script>
</body>
</html>
